$(document).ready(function(){function e(){var e=!0;if(""===$("#name").val()||""===$("#description").val()||""===$("#startdate").val()||""===$("#enddate").val()||null===$("#type_dropdown").val()||null===$("#country_dropdown").val()?(e=!1,$(".main").show()):$(".main").hide(),""!==$("#startdate").val()||""!==$("#enddate").val()){var t=new Date($("#startdate").val()),n=t.getTime(),s=new Date($("#enddate").val()),r=s.getTime();r<=n?(e=!1,$(".dateError").show()):$(".dateError").hide()}return""===$("#name1").val()||""===$("#id1").val()?(e=!1,$(".group-a").show()):$(".group-a").hide(),""===$("#name2").val()||""===$("#id2").val()?(e=!1,$(".group-b").show()):$(".group-b").hide(),e?void a():($(".success").hide(),$(".error").hide(),$("html,body").animate({scrollTop:0},"slow"),!1)}function a(){var e=new Date($("#startdate").val()),a=e.getTime(),t=new Date($("#enddate").val());t.setDate(t.getDate()+1);var s=t.getTime(),r=50;""!==$("#name3").val()&&""!==$("#id3").val()&&(r=100/3),""!==$("#name4").val()&&""!==$("#id4").val()&&(r=25);var o=[];"adsets"===$("#type_dropdown").val()?o.push({name:$("#name1").val(),treatment_percentage:r,adsets:[parseInt($("#id1").val())]},{name:$("#name2").val(),treatment_percentage:r,adsets:[parseInt($("#id2").val())]}):o.push({name:$("#name1").val(),treatment_percentage:r,campaigns:[parseInt($("#id1").val())]},{name:$("#name2").val(),treatment_percentage:r,campaigns:[parseInt($("#id2").val())]}),""!==$("#name3").val()&&""!==$("#id3").val()&&("adsets"===$("#type_dropdown").val()?o.push({name:$("#name3").val(),treatment_percentage:r,adsets:[parseInt($("#id3").val())]}):o.push({name:$("#name3").val(),treatment_percentage:r,campaigns:[parseInt($("#id3").val())]})),""!==$("#name4").val()&&""!==$("#id4").val()&&("adsets"===$("#type_dropdown").val()?o.push({name:$("#name4").val(),treatment_percentage:r,adsets:[parseInt($("#id4").val())]}):o.push({name:$("#name4").val(),treatment_percentage:r,campaigns:[parseInt($("#id4").val())]}));var d={name:$("#name").val(),description:$("#description").val(),start_time:a,end_time:s,type:"SPLIT_TEST",cells:o,access_token:"EAADeZBgSHnjsBAJi4JGHWUpFeA13bm2SjvOfDL1llxouZB4TSJPZBLZAw2TIgFZA9pbDAuEfD4dsysKiPHcSOkDy1n5ZBAmZC7Fo6I3q65PJYFkHX0h8O2cBFot6jFjD0PCZBzYMMs2aGriUv551kvlaV1Mvltmd7ZC8NJNBjnZA1xkwZDZD"};n(d)}function t(e){var a=["1yahQgPlrwcTgb5uADyTIt6Ahyzsrks7vPDSzTtF8BoY","1R8GFHVlpQYVsyZonAPPkjlb-s9j-yoz1-443Rkh1VvQ","1rG0arZhW_JczujYYNfhol1TzvswLjrNDcAbAGbhROVo","1RlPLjb6dDylD5HPpMa_iOdTI6bD_xgzumg_LY5BrR-g","1rPmLfwj4yjcuBuiWKADyGdjYaaUypQUbWZojcnF6xoc","1L-TLXeCOfuwZbGaIPrPVpu8crYuc3OsAPuK-t6nj0M4","1NO9W4oo6g6tGHUWd3QQuXrp07cYNklDmVW4S92pgbW8"],t=parseInt($("#country_dropdown").val());gapi.client.sheets.spreadsheets.values.append({spreadsheetId:a[t],range:"Sheet1!A1",valueInputOption:"USER_ENTERED",values:[[$("#name").val(),$("#description").val(),$("#startdate").val(),$("#enddate").val(),$("#type_dropdown").val(),$("#name1").val(),$("#id1").val(),$("#name2").val(),$("#id2").val(),$("#name3").val(),$("#id3").val(),$("#name4").val(),$("#id4").val(),e]]}).then(function(e){console.log("updated in Google Sheets")},function(e){console.log(e.result.error.message)})}function n(e){$.ajax({url:"https://graph.facebook.com/v2.7/683259405096319/ad_studies",type:"POST",dataType:"json",data:e,success:function(e){$(".errorResponse").hide(),$(".successResponse").show();var a=document.getElementById("success-msg");a.innerHTML="Congratulations! You have scheduled an AB Test on Facebook.<br />This is your Ad Study ID: "+e.id,t(e.id)},error:function(e,a,t){console.log(JSON.stringify(e.responseJSON)),$(".successResponse").hide(),$(".errorResponse").show();var n=document.getElementById("error-msg");n.innerHTML="Sorry, I am unable to schedule an AB Test.<br />This is the error message: "+JSON.stringify(e.responseJSON.error.message)}}),$("html,body").animate({scrollTop:0},"slow")}$(function(){$("#startdate").datepicker(),$("#enddate").datepicker()}),$(".main").hide(),$(".dateError").hide(),$(".group-a").hide(),$(".group-b").hide(),$(".successResponse").hide(),$(".errorResponse").hide(),$("form").submit(function(a){a.preventDefault(),e()})});